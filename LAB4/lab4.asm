CODE SEGMENT 'CODE'
ASSUME CS:CODE,DS:CODE
	MAIN PROC FAR
START:
	MOV AX,0
	MOV DS,AX
	MOV SI,60H*4;设置中断向量
	MOV AX,OFFSET INT0
	MOV [SI],AX
	MOV AX,SEG INT0
	MOV [SI+2],AX
	CLI			;初始化8259A
	
	MOV AL,00010011B
	MOV DX,0400H
	OUT DX,AL
	MOV AL,060H
	MOV DX,0402H
	OUT DX,AL
	MOV AL,1
	OUT DX,AL
	MOV AL,80H
	OUT DX,AL;完成8259A初始化
	MOV BL,1
	STI

LIU:
	MOV DX,0400H
	MOV AL,60H
	OUT DX,AL
	JMP LIU
	
	;JMP $
	
	RET 
	MAIN ENDP
	
INT0 PROC

	
	MOV AL,BL
	ROL BL,1
	MOV DX,0600H
	OUT DX,AL
	IRET
INT0 ENDP

CODE ENDS
END START

	
	
	
	
	
	